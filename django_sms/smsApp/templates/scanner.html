{% load static %}
<script src="{% static 'assets/default/js/jquery-3.6.0.min.js' %}"></script> 
 <script src="{% static 'assets/instascan.min.js' %}"></script> 
<style>
    #uni_modal .modal-dialog {
        max-width: 100%;
        height: calc(100% - 30px);
        margin: 0px auto;
    }
    #uni_modal .modal-footer {
        display: none
    }

    #uni_modal .modal-sub-footer {
        display: flex
    }

    #scanner {
        width: 100%;
        height: 50vh;
        margin: 0px auto;
        position: relative;
        object-fit: cover;
        object-position: center center;
    }

    #scanner-focus {
        background: #00000085;
        -webkit-clip-path: polygon(0% 0%, 0% 100%, 25% 100%, 25% 25%, 75% 25%, 75% 75%, 25% 75%, 25% 100%, 100% 100%, 100% 0%);
        clip-path: polygon(0% 0%, 0% 100%, 25% 100%, 25% 25%, 75% 25%, 75% 75%, 25% 75%, 25% 100%, 100% 100%, 100% 0%);
        height: 100%;
        width: 100%;
        top: 0;
        left: 0;
    }
    img{
        display: block;
        margin: 0 auto;
        width: 40%;
        height: auto;

    }
    h1{
        text-align: center;}
</style> 
 <body> 
    <div class="ui container">
        <!-- <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=www.google.com"> -->
        <!-- <img
            src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data={{request.scheme}}://scanner.html/view_member/?group={{request.GET.group}}&name={{request.GET.name}}&gender={{request.GET.gender}}&contact={{request.GET.contact}}&email={{request.GET.email}}&address={{request.GET.address}}"> -->
            <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&amp;data={{request.scheme}}://{{request.get_host}}{% static 'scanner/scanner.html' %}?group={{request.GET.group}}&amp;name={{request.GET.name}}&amp;gender={{request.GET.gender}}&amp;contact={{request.GET.contact}}&amp;email={{request.GET.email}}&amp;address={{request.GET.address}}{% if request.path|slice:'12:' == '/view_member/' %}&amp;view=true{% endif %}">



        
       
    </div>

    <!-- <!DOCTYPE html>
    
    <html>
    
    <head>
    
        <meta charset='utf-8'>
    
        <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    
        <title>QR Code</title>
    
        <meta name='viewport' content='width=device-width, initial-scale=1'>
    
        <link rel='stylesheet' type='text/css' media='screen' href='{% static ' main.css' %}'>
    
    </head> -->
    
    <!-- <body>
    
        <div id="qrcode" style="display:flex; justify-content:center;"></div>
    
        <script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js"></script>
    
        <script>

            const qrcodeContainer = document.querySelector('#qrcode');

            const qrText = window.location.href;

            const qrcode = new QRCode(qrcodeContainer, {

                text: qrText,

                width: 160,

                height: 160,

                colorDark: '#000',

                colorLight: '#fff',

                correctLevel: QRCode.CorrectLevel.H

            });

        </script>
    
    </body>
    


 -->
<!-- <!DOCTYPE html>
<html>

<head>
    <title>QR Code Scanner</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/@zxing/library@0.18.4/bundled/zxing.min.js"></script>
    <style type="text/css">
        body {
            font-family: sans-serif;
            margin: 0;
            padding: 0;
        }

        #scanner-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #f8f8f8;
        }

        #scanner-video {
            max-width: 100%;
            max-height: 80vh;
            margin-bottom: 20px;
        }

        #scanner-output {
            font-size: 24px;
            font-weight: bold;
            color: green;
            margin-top: 20px;
        }

        .error {
            color: red;
            font-size: 20px;
            font-weight: bold;
            margin-top: 20px;
        }
    </style>
</head>

<body>
    <div id="scanner-container">
        <video id="scanner-video"></video>
        <div id="scanner-output"></div>
        <div id="scanner-error" class="error"></div>
    </div>
    <script type="text/javascript">
        const video = document.getElementById('scanner-video');
        const output = document.getElementById('scanner-output');
        const error = document.getElementById('scanner-error');
        let codeReader;
        let validMembers = [];

        // Function to generate a random member ID
        function generateMemberID() {
            let id;
            do {
                id = Math.floor(Math.random() * 1000000).toString();
            } while (validMembers.includes(id));
            validMembers.push(id);
            return id;
        }

        function onScanSuccess(result) {
            // Check if the scanned value is a valid member ID
            if (validMembers.includes(result.text)) {
                output.textContent = "You're a member!";
                output.style.color = 'green';
            } else {
                output.textContent = "Sorry, you're not a member";
                output.style.color = 'red';
            }
        }

        function onScanError(error) {
            console.error(error);
            error.textContent = 'Error: ' + error.message;
        }

        function startScanner() {
            // Create a new code reader instance
            codeReader = new ZXing.BrowserMultiFormatReader();

            // Try to access the device camera and start scanning for QR codes
            codeReader.decodeFromVideoDevice(undefined, 'scanner-video', onScanSuccess, onScanError);
        }

        function stopScanner() {
            // Stop scanning for QR codes
            codeReader.reset();
        }

        // Generate unique IDs for 400 new members
        for (let i = 0; i < 400; i++) {
            generateMemberID();
        }

        // Start the scanner when the page is loaded
        window.addEventListener('load', startScanner);

    </script>
</body>

</html> -->